<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Mazicky - React-Transform</title>
  <link rel="shortcut icon" href="/assets/images/favicon.ico">
  <link rel="stylesheet" href="/assets/css/style.css">
  <link rel="alternate" type="application/rss+xml" title="My Blog" href="/rss.xml">
  <link rel="stylesheet" href="/assets/css/highlight.css">
</head>
<body>

  <nav class="main-nav">
    
        <a href="/"> <span class="arrow">←</span> Home </a>
    

    
        
            <a href="/about">About </a>
        
    
    <a class="cta" href="/feed.xml">Subscribe</a>
</nav>

  

  <section id="wrapper" class="">
    <article class="post">
    <header>
        <h1>React-Transform</h1>
        <h2 class="headline">September 21, 2015</h2>
    </header>
    <section id="post-body">
        <h1>React-Transform</h1>

<p>React Transform은 기본적으로 <a href="http://nodejs.github.io/iojs-ko/articles/2015/05/11/story-about-js-and-babel/">babel</a> plugin이다. 트랜스파일러인 babel을 이용해, React Component들을 커스터마이징해서 쓸 수 있게 해주는 것이다.  </p>

<p>현재 React Hot Loader도 deprecated되고 react-transform 기반으로 만들어진 react-transform-hmr로 넘어간 상태다. </p>

<p>이름은 react-transform-(이름) 형식으로 지어지며, 현재 <a href="https://github.com/gaearon/babel-plugin-react-transform">공식페이지</a>에는 4개의 react-transform들이 올라와있다. 공식페이지에서는 transform을 만드는 법 까지 가이드를 하고 있는데, 다양한 유저들의 참여를 바라는 듯하니 관심이있다면 참여해보자.</p>

<p>샘플 프로젝트는 <a href="react-transform-boilerplate">이곳</a>에서 볼 수 있다.</p>

<h1>사용법</h1>

<p>우선, 플러그인을 설치한다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">npm install --save-dev babel-plugin-react-transform
</code></pre></div>
<p>사용하고싶은 react-transform을 설치한다.  </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">npm install --save-dev react-transform-hmr
</code></pre></div>
<p><code>.babelrc</code> 이 없다면 파일을 만들고, <code>extra.react-transform</code>을 include한다. 해당 필드는 사용하고 싶은 transform들의 array여야한다.</p>

<p>예제)</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">{
  &quot;stage&quot;: 0,
  &quot;env&quot;: {
    &quot;development&quot;: {
      &quot;plugins&quot;: [&quot;react-transform&quot;],
      &quot;extra&quot;: {
        &quot;react-transform&quot;: [{
          &quot;target&quot;: &quot;react-transform-hmr&quot;,
          &quot;imports&quot;: [&quot;react&quot;],
          &quot;locals&quot;: [&quot;module&quot;]
        }]
      }
    }
  }
}
</code></pre></div>
<p>찬찬히 살펴보자.  </p>

<p>일단, <code>env.development</code>안에 작성하여 모든 것이 개발버전에서만 돌아가도록한다. <code>plugins</code>로 <code>react-transform</code>을 정의해주고, 그 밑으로 위에서 언급한 <code>extra.react-transform</code>을 정의한다.  </p>

<p>해당 인자로는 <strong>배열</strong>(중요)이 들어가며, 사용할 transform들의 정보를 넣어주면 된다.  </p>

<p>각 transform들에 들어가는 필드를 알아보자 .<br>
<code>target</code>은 npm module이름이나, local path가 들어갈 수 있으며, 보통 사용하는 transform의 이름이 된다. <code>imports</code>, <code>locals</code>는, 해당 transform이 사용하는 의존성이나, 인자로 들어갈 변수이다. 해당 필드에 들어가는 내용은 사용하는 transform의 document를 잘 읽고 넣어야한다.</p>

<h1>Transform만들어보기</h1>

<p>transform이 어떻게 동작하는지, <code>imports</code> <code>locals</code>가 무슨 용도인지 알고싶은 분들, 이런 transform이 있으면 좋겠는데! 라는 아이디어가 있으신 분들은 transform을 직접 만들어보는 것도 좋은 경험이 될 것 같다.</p>

<ol>
<li><p>이름정하기<br>
이름은 <code>react-transform-*</code>의 형태로 만들어서, 이름규칙을 맞춘다.  </p></li>
<li><p>function export하기<br>
Transform의 전체 구조는 function을 리턴하는 function이다.<br>
예제) 공식페이지 발췌</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">export default function myTransform(options) {
  return function wrap(ReactClass, uniqueId) {
    return ReactClass;
  }
}
</code></pre></div></li>
</ol>

<p>예제코드를 살펴보면, <code>ReactClass</code>가 인자로 들어온다. React Component가 사용되기전, 후킹되어 이 함수로 들어온다고 짐작할 수 있다. 우리는 이 함수에서 컴포넌트를 지지고 볶아서 리턴하면 되는 것이다.</p>

<p><code>options</code>에는 앞서 언급한 <code>imports</code>, <code>locals</code>등 사용할 의존성이나 변수들이 담겨져 있어서, 원하는 동작을 할 수 있도록 만들 수 있을 것이다.</p>

<p>더 자세한 내용은 <a href="https://github.com/gaearon/babel-plugin-react-transform#writing-a-transform">공식페이지</a>에서 확인 할 수 있다.</p>

<h1>마무리</h1>

<p>정말정말 업데이트가 빠르다. 설치예제에서 사용한 <code>react-transform-hmr</code>만해도, 이 글을 작성하는 도중에 <code>react-transform-webpack-hmr</code>에서 이름이 바뀌었다.(-_-)</p>

<p>그래도, error를 렌더링화면에 띄워준다던가, 업데이트 된 것을 highlight 해준다던가 하는 것을, 후킹한 함수에서 처리한다는 발상은 참신한 것 같다. 나도 아이디어가 생기면 transform을 만들어서 NPM에 하나 등록해보고싶다.</p>

    </section>
</article>
<footer id="post-meta" class="clearfix">
    <a href="http://twitter.com/mazicky">
        <img class="avatar" src="/assets/images/avatar.png">
        <div>
            <span class="dark">mazicky</span>
            <span>Full-Stack Web Development & Indie Game Development</span>
        </div>
    </a>

    <section id="sharing">
        <a class="twitter" href="https://twitter.com/intent/tweet?text=http://mazicky.github.io/2015/react-transform/ - React-Transform by @mazicky"><span class="icon-twitter"> Tweet</span></a>

<a class="facebook" href="#" onclick="
    window.open(
      'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),
      'facebook-share-dialog',
      'width=626,height=436');
    return false;"><span class="icon-facebook-rect"> Share</span>
</a>
    </section>
</footer>

<!-- Disqus comments -->

    <div class="archive readmore">
        <h3>Comments</h3>
        <section class="disqus">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'mazicky';
        var disqus_developer = 0; // developer mode is on
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>
    </div>


<!-- Archive post list -->

    <ul id="post-list" class="archive readmore">
        <h3>Read more</h3>
        
            <li>
                <a href="/2015/react-transform/">React-Transform<aside class="dates">Sep 21</aside></a>
            </li>
        
            <li>
                <a href="/2015/redux/">Redux란?<aside class="dates">Sep 21</aside></a>
            </li>
        
    </ul>





  </section>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="/assets/js/main.js"></script>
  <script src="/assets/js/highlight.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-67859986-1', 'auto');
    ga('send', 'pageview');
  </script>
</body>
</html>



